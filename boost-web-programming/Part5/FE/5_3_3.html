<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title> Join !</title>
    </head>
    <body>
        <h1>Join my website!</h1>
        <div class="formWrap">
            <form action="/join" method="post" id="myform">
                <div class="inputWrap">
                    <div class="email">
                        <span> Email </span> <input type="text" name="email"><br/>
                    </div>
                    <div class="password">
                        <span> Password </span> <input type="password" name="password"><br/>
                    </div>
                </div>
                <input class="sendbtn" type="submit">
           </form>
        </div>

        <section class="result"></section>
        <script>
            var btn = document.querySelector(".sendbtn");
            var result = document.querySelector(".result");
            var email = document.querySelector("[name='email']");
            email.addEventListener("change", function(evt){
                evt.preventDefault();
                var emailValue = document.querySelector("[name='email']").value;
                // 첫글자가 문자숫자_ 이고 ***@***.** 인 양식
                var emailValid = (/^[\w+_]\w+@\w+\.\w+/).test(emailValue);
                if(emailValid){
                    result.innerHTML = "email입력이 좋습니다.";
                    document.querySelector("#myform").submit();
                }else{
                    result.innerHTML = "email 다시입력하세요.";          
                }
            });
        </script>
    </body>
</html>